import React from 'react';
import { NavBar, List,Toast } from 'antd-mobile';
import { connect } from 'react-redux'
import axios from 'axios'

const Item = List.Item;
const Brief = Item.Brief;
class Goodslist extends React.Component {
    state={
        goodsListMenu:[]
    }
    async componentWillMount() {
        this.props.dispatch({ type: 'tabbar', show: true })
        let { id } = this.props.match.params
        id = id.substring(0, id.length - 1)
        let itemcodes;
        switch(id){
            case'鲜花': itemcodes='9012474,9012243,9012471,9012452,9012461,9012177,9012455,9012450,9012451,9010969,9010855,9012481,9012154,9092149,9012089,9012332,9012175,9012473,9010947,9012462,9012223,9010731,9012446,9010766,9012467,9012345,9012469,9012079,9012470,9012457,9012150,9012475,9012463,9012078,9010849,9012441,9012011,9010890,9012163,9012482,9012060,9012477,9012479,9012472,9012437,9010011,9012483,9012047,9012456,9012458,9012480,9012478,9012476,9012454,9012334,9010877,9012339,9012453,9012447,9012033,9012273,9012039,9010917,9012208,9010904,9012411,9012148,9012161,9012285,9012041,9012232,9012144,9012240,9012149,9012242,9012174,9012275,9012038,9092122,9012222,9010105,9010811,9012213,9012449,9012460,9012434,9012158,9092118,9012209,9012281,9012315,9012025,9010965,9012226,9012143,9010765,9092119,9012413,9012082,9010946,9010949,9012230,9012438,9012217,9012346,9012118,9010928,9012239,9012228,9012283,9092127,9012141,9012221,9010875,9012279,9012361,9010932,9092120,9012231,9012128,9012090,9010817,9012043,9010869,9092148,9012448,9092116,9012252,9012061,9012218,9012436,9012286,9012180,9010734,9012219,9012342,9012138,9010815,9010961,9092133,9012030,9012412,9012430,9012236,9012250,9012241,9012088,9010797,9012484,9012284,9012251,9012360,9012153,9012485,9012234,9012119,9012216,9010968,9012278,9012237,9012249,9012207,9012235'
            break;
            case'永生花': itemcodes='1073256,1073186,1073287,1073033,1073094,1073155,1073100,1073263,1073173,1073244,1073187,1073093,1073157,1073255,1073210,1073166,1073151,1073145,1073159,1073137,1073156,1073266,1070064,1073120,1073206,1073251,1073252,1073185,1073146,1073253,1073274,1073092,1073140,1073239,1073197,1073199,1073200,1073172,1073213,1073111,1073038,1073240,1073243,1073275,1073212,1073242,1073176,1073231,1073184,1073110,1073164,1073136,1073032,1073109,1073158,1073241,1073147,1073121,1073108,1073135,1073017,1073191,1073190,1073232,1070063,1073034,1073288,1073139,1073237,1073204,1073270,1073279,1073265,1073168,1073057,1073272,1073283,1073282,1073068,1073014,1073153,1073160,1073118,1073114,1073265,1073168,1073057,1073272,1073283,1073282,1073068,1073014,1073153,1073160,1073118,1073114'
            break;
            case'蛋糕': itemcodes='5302071,5302008,5602016,5602015,5302017,5302066,5302015,5702002,5302019,5222025,5181052,5502046,5181029,5302010,5302063,5902001,5302062,5501012,5501010,5501137,5501138,5501020,5501002,5221029,5501001,5502011,5181056,5302016,5181055,5501047,5181053,5502050,5502041,5501040,5501042,5702016,5221004,5501004,5702064,5501045,5501044,5702043,5501048,5702030,5301151,5301096,5602062,5602045,5301105,5301134,5142026,5901084,5222012,5602022,5702071,5702019,5602009,5501013,5602001,5222009,5301116,5181027,5142028,5602026,5222023,5222022,5222015,5602038,5702032,5131001,5301118,5602050,5222003,5221028,5901020,5301117,5142025,5501025,5901042,5221031,5301115,5142009,5602060,5222013,5602063,5602059,5602058,5602061,5301119,5222002,5142006,5501026,5221032,5301111,5702024,5222010,5142029,5221035,5222027,5501008,5301106,5301112,5602055,5602051,5181064,5131018,5501027,5181078,5301110,5301103,5602054,5301114,5702045,5301108,5142012,5222021,5222001,5501003,5301113,5602057,5181076,5301104,5702011,5502007,5501034,5301109,5231021,5602056,5302121,5702035,5301107,5702027,5301155,5702083,5301154,5602053,5302124,5501018,5181070,5301127,5501024,5131010,5901045,5501031,5131015,5702007,5142007,5301164,5142008,5301157,5181095,5181084,5181079,5131004,5702039,5221034,5181097,5702049,5142004,5301159,5181107,5301145,5501051,5142015,5181077,5301168,5301152,5181098,5181096,5231002,5231005,5181085,5302172,5181106,5181105,5702051,5231026,5231024,5231000,5702012,5501015,5231022,5301146,5301148,5231020,5615017,5301161,5231018,5702073,5302144,5231016,5181062'
            break;
            case'礼品': itemcodes='1073256,1073186,1060013,1073287,1073033,1073094,1073155,1073100,1073263,1073173,1073244,1073187,1073093,1073157,1073255,1073210,1073166,1073151,1073145,1073159,1073137,1073156,1073266,1070064,1073120,1073206,1073252,1073251,1073185,1073146,1073253,1073092,1073274,1073140,1073239,1073197,1073199,1073200,1073172,1073213,1073111,1073038,1073240,1073243,1073275,1073212,1073242,1073176,1073231,1073184,1065046,1076113,1076108,1073110,1073164,1073136,1073032,1076107,1073109,1087030,1076103,1073158,1073241,1076096,1073147,1071031,1061006,1077011,1073121,1070072,1073108,1064005,1073135,1087031,1076049,1070069,1076040,1077025,1065004,1077016,1076056,1076111,1087029,1073017,1077009,1076050,1077017,1061036,1076104,1071004,1070017,1070082,1071007,1077024,1073190,1073191,1073232,1077022,1076057,1076105,1070063,1070071,1073034,1065003,1077021,1073288,1076092,1064035,1077020,1065034,1073139,1061035,1073237,1073204,1073270,1065032,1073279,1073265,1073168,1076114,1071001,1077030,1073057,1073272,1073283,1073282,1061005,1073068,1064025,1076102,1073014,1073153,1077007,1073118,1073160,1073114,1077008,1061013,1077029,1076100,1076090,1073260,1076058,1073205,1073131,1073117,1073116,1073113,1073102,1073081,1076106,1077027,1076101,1076112'
            break;
            case'其他': itemcodes='9020012,7010006,9020011,7010009,7010002,9020015,9020014,7010008,7010001,7010004,7010012,7010011,9020010,7010007,7010005,7010003'
            break;
            default:
                itemcodes=this.state.goodsListMenu;break;
        }
        const {data} = await axios.post('http://120.24.63.27:2001/api/goods/list',{itemcodes})
        this.setState({
            goodsListMenu:data.data
        })
        
    }
    gotodetails=(id)=>{
        this.props.history.push('/goods/goodsdetails/'+id)
    }
    componentDidMount(){
        Toast.loading('Loading...', 1);

          setTimeout(() => {
            Toast.hide();
          }, 10000);
    }
    componentWillUnmount() {
        this.props.dispatch({ type: 'tabbar', show: false })
    }

    render() {
        let { id } = this.props.match.params
        id = id.substring(0, id.length - 1)
        return (
            <>
                <NavBar
                    mode="light"
                    icon={<i className='iconfont icon-arrow-left' style={{ color: '#333', fontSize: '20px' }}></i>}
                    onLeftClick={() => {
                        return this.props.history.push('/goods')
                    }}
                    style={{ fontSize: '12px' }}
                >{id}</NavBar>

                 <List renderHeader={() => <img src='https://img02.hua.com/slider/18_youflower_m.jpg' alt='' style={{width:'100%'}}/>} className="my-list">   
                {
                    this.state.goodsListMenu.map(item=> 
                    <Item  align="top" thumb={'http://120.24.63.27:2005/img/'+item.ItemCode+'.jpg_220x240.jpg'} multipleLine onClick={this.gotodetails.bind(null,item.ItemCode)}>
                    {item.Instro} <Brief style={{color:'#f25555',fontSize:'12px'}}>到手<span style={{color:'#f25555',fontWeight:'bold',fontSize:'18px'}}>￥{item.Price}</span></Brief>
                    </Item>)
                }
                </List>
                
            </>
        )
    }

}
const mapStateToProps = function (state) {
    return {
        hidden: state.hidden,
    }
}
Goodslist = connect(mapStateToProps)(Goodslist)
export default Goodslist